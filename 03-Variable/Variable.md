# Variable

var声明语句可以创建一个特定类型的变量，然后给变量附加一个名字，并且设置变量的初始值。变量声明的一般语法如下：

```go
   var 变量名字 类型 = 表达式
```

简短变量声明语句的形式可用于声明和初始化局部变量。

```go
   变量名字 := 表达式
```

在Go语言中，返回函数中局部变量的地址也是安全的。例如下面的代码，调用f函数时创建局部变量v，在局部变量地址被返回之后依然有效，因为指针p依然引用这个变量。

```go
   var p = f()
   
   func f() *int {
       v := 1
       return &v
   }
```

每次调用f函数都将返回不同的结果：

```go
   fmt.Println(f() == f()) // "false"
```

另一个创建变量的方法是调用用内建的new函数。

```go
   p := new(int)   // p, *int 类型, 指向匿名的 int 变量
   fmt.Println(*p) // "0"
   *p = 2          // 设置 int 匿名变量的值为 2
   fmt.Println(*p) // "2"
```

用new创建变量和普通变量声明语句方式创建变量没有什么区别，除了不需要声明一个临时变量的名字外，我们还可以在表达式中使用new(T)。换言之，new函数类似是一种语法糖，而不是一个新的基础概念。下面的两个newInt函数有着相同的行为：

```go
   func newInt() *int {
       return new(int)
   }
   
   func newInt() *int {
       var dummy int
       return &dummy
   }
```

每次调用new函数都是返回一个新的变量的地址，因为下面两个地址是不同的：

```go
   p := new(int)
   q := new(int)
   fmt.Println(p == q) // "false"
```

当然也可能有特殊情况：如果两个类型都是空的，也就是说类型的大小是0，例如`struct{}`和 `[0]int`, 有可能有相同的地址（依赖具体的语言实现）（译注：请谨慎使用大小为0的类型，因为如果类型的大小为0的话，可能导致Go语言的自动垃圾回收器有不同的行为，具体请查看`runtime.SetFinalizer`函数相关文档）。